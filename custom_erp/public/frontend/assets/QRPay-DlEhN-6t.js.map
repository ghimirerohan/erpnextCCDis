{"version":3,"file":"QRPay-DlEhN-6t.js","sources":["../../../../frontend/src/components/LoadingOverlay.vue","../../../../frontend/src/pages/QRPay.vue"],"sourcesContent":["<template>\n  <div class=\"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50\">\n    <div class=\"bg-white rounded-xl p-6 shadow-lg flex flex-col items-center space-y-2\">\n      <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      <p class=\"text-gray-700 font-medium\">Verifying Payment...</p>\n    </div>\n  </div>\n</template>\n\n<script setup>\n// ADDED BY AI: FONEPAY LIVE SOCKET - Loading overlay component for payment verification\n</script>\n\n<style scoped>\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.animate-spin {\n  animation: spin 1s linear infinite;\n}\n</style>\n\n","<template>\n  <div class=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-20\">\n      <div class=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex justify-between items-center py-6\">\n          <div class=\"flex items-center space-x-4\">\n            <div class=\"flex items-center justify-center w-12 h-12 bg-blue-600 rounded-lg\">\n              <svg class=\"w-6 h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n              </svg>\n            </div>\n            <div>\n              <h1 class=\"text-2xl font-bold text-gray-900\">QRPay</h1>\n              <p class=\"text-sm text-gray-600\">Dynamic Fonepay QR Generator ‚Ä¢ {{ session.user }}</p>\n            </div>\n          </div>\n          <button\n            @click=\"session.logout.submit()\"\n            class=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"></path>\n            </svg>\n            Logout\n          </button>\n        </div>\n      </div>\n    </header>\n\n    <main class=\"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8\">\n      <!-- Customer Selection -->\n      <section class=\"bg-white rounded-xl shadow-lg border border-gray-200 p-8\">\n        <div class=\"flex items-center mb-6\">\n          <div class=\"flex items-center justify-center w-10 h-10 bg-green-100 rounded-lg mr-3\">\n            <svg class=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"></path>\n            </svg>\n          </div>\n          <h2 class=\"text-xl font-semibold text-gray-900\">Customer</h2>\n        </div>\n        <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          <div>\n            <label class=\"block text-sm font-semibold text-gray-700 mb-3\">Select Customer</label>\n            <Autocomplete\n              v-model=\"selectedCustomerValue\"\n              :options=\"customerOptions\"\n              :loading=\"loadingCustomers\"\n              placeholder=\"Search by customer name or code\"\n              class=\"w-full\"\n            />\n            <p v-if=\"!selectedCustomer\" class=\"mt-2 text-sm text-gray-500\">Start typing to search every customer by name or code. All customers are available.</p>\n          </div>\n          <div v-if=\"selectedCustomer\" class=\"space-y-3\">\n            <label class=\"block text-sm font-semibold text-gray-700\">Customer Details</label>\n            <div class=\"p-5 bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg space-y-2\">\n              <div class=\"text-lg font-semibold text-gray-900\">{{ selectedCustomer.customer_name }}</div>\n              <div class=\"text-sm text-gray-600\">Customer Code: {{ selectedCustomer.name }}</div>\n              <div v-if=\"selectedCustomer.customer_group\" class=\"text-sm text-gray-600\">Group: {{ selectedCustomer.customer_group }}</div>\n              <div v-if=\"selectedCustomer.territory\" class=\"text-sm text-gray-600\">Territory: {{ selectedCustomer.territory }}</div>\n              <div v-if=\"selectedCustomer.address_display\" class=\"text-sm text-gray-600 whitespace-pre-line\">\n                {{ selectedCustomer.address_display }}\n              </div>\n              <div v-else-if=\"selectedCustomer.customer_primary_address\" class=\"text-sm text-gray-600\">\n                Address: {{ selectedCustomer.customer_primary_address }}\n              </div>\n              <div v-if=\"selectedCustomer.mobile_no\" class=\"text-sm text-gray-600\">Phone: {{ selectedCustomer.mobile_no }}</div>\n              <div v-if=\"selectedCustomer.email_id\" class=\"text-sm text-gray-600\">Email: {{ selectedCustomer.email_id }}</div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- Payment Details -->\n      <section class=\"bg-white rounded-xl shadow-lg border border-gray-200 p-8\">\n        <div class=\"flex items-center mb-6\">\n          <div class=\"flex items-center justify-center w-10 h-10 bg-orange-100 rounded-lg mr-3\">\n            <svg class=\"w-5 h-5 text-orange-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1\"></path>\n            </svg>\n          </div>\n          <h2 class=\"text-xl font-semibold text-gray-900\">Payment Details</h2>\n        </div>\n        <div class=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <div>\n            <label class=\"block text-sm font-semibold text-gray-700 mb-3\">Amount (NPR)</label>\n            <input\n              v-model.number=\"paymentAmount\"\n              type=\"number\"\n              step=\"0.01\"\n              min=\"0\"\n              placeholder=\"Enter amount to collect\"\n              class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n            />\n          </div>\n          <div>\n            <label class=\"block text-sm font-semibold text-gray-700 mb-3\">Remarks (optional)</label>\n            <input\n              v-model=\"remarks\"\n              type=\"text\"\n              placeholder=\"Defaults to: Customer Name - NPR Amount (Date & Time)\"\n              class=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200\"\n            />\n          </div>\n        </div>\n      </section>\n\n      <!-- Generate Button -->\n      <section class=\"bg-white rounded-xl shadow-lg border border-gray-200 p-8 text-center\">\n        <button\n          @click=\"generateQR\"\n          :disabled=\"!canGenerate || generating\"\n          :class=\"[\n            'inline-flex items-center px-8 py-4 border border-transparent text-lg font-medium rounded-lg shadow-sm text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200',\n            canGenerate && !generating\n              ? 'bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 shadow-lg hover:shadow-xl'\n              : 'bg-gray-400 cursor-not-allowed'\n          ]\"\n        >\n          <svg v-if=\"generating\" class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n            <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <svg v-else class=\"w-5 h-5 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n          {{ generating ? 'Generating QR Code...' : 'Generate Customer QR Code' }}\n        </button>\n      </section>\n\n      <!-- Payment Success Card - Shows ABOVE QR section -->\n      <section v-if=\"qrStatus === 'SUCCESS' && paymentEntry\" class=\"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl shadow-lg border-2 border-green-300 p-8 animate-pulse-slow\">\n        <div class=\"text-center space-y-4\">\n          <div class=\"flex items-center justify-center w-20 h-20 bg-green-500 rounded-full mx-auto shadow-lg\">\n            <svg class=\"w-12 h-12 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" d=\"M5 13l4 4L19 7\"></path>\n            </svg>\n          </div>\n          <h2 class=\"text-3xl font-bold text-green-800\">üéâ Payment Successful!</h2>\n          <div class=\"bg-white rounded-lg p-4 shadow-inner\">\n            <p class=\"text-lg font-semibold text-gray-700\">Amount Received</p>\n            <p class=\"text-4xl font-bold text-green-600\">NPR {{ formatAmount(paymentAmount) }}</p>\n          </div>\n          <p class=\"text-gray-700\">Customer: <span class=\"font-semibold\">{{ selectedCustomer?.customer_name }}</span></p>\n          <p v-if=\"paymentEntry\" class=\"text-sm text-gray-600\">\n            Payment Entry: <a :href=\"`/app/payment-entry/${paymentEntry}`\" class=\"text-blue-600 hover:text-blue-800 underline font-semibold\" target=\"_blank\" rel=\"noopener\">{{ paymentEntry }}</a>\n          </p>\n          <button \n            @click=\"resetForNextPayment\" \n            class=\"inline-flex items-center px-8 py-4 bg-blue-600 text-white text-lg font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-200 shadow-lg hover:shadow-xl\"\n          >\n            <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path>\n            </svg>\n            Make New Payment\n          </button>\n        </div>\n      </section>\n\n      <!-- QR & Status -->\n      <section v-if=\"qrData\" class=\"bg-white rounded-xl shadow-lg border border-gray-200 p-8 space-y-6\">\n        <div class=\"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6\">\n          <div class=\"flex-1 text-center\">\n            <h3 class=\"text-xl font-semibold text-gray-900 mb-6\">QR Code</h3>\n            <div id=\"qr-code\" class=\"flex justify-center\"></div>\n          </div>\n          <div class=\"flex-1 space-y-4\">\n            <div class=\"bg-gray-50 rounded-lg p-6 space-y-3\">\n              <div class=\"text-center\">\n                <div class=\"text-xs text-gray-500 uppercase tracking-wide mb-2\">Payment Status</div>\n                <div class=\"text-2xl font-bold\" :class=\"statusColorClass\">{{ qrStatus || 'CREATED' }}</div>\n              </div>\n              <div class=\"border-t border-gray-200 pt-3 space-y-2\">\n                <div class=\"flex justify-between text-sm\">\n                  <span class=\"text-gray-600\">Amount:</span>\n                  <span class=\"font-semibold\">NPR {{ formatAmount(paymentAmount) }}</span>\n                </div>\n                <div class=\"flex justify-between text-sm\">\n                  <span class=\"text-gray-600\">Customer:</span>\n                  <span class=\"font-semibold truncate ml-2\">{{ selectedCustomer?.customer_name }}</span>\n                </div>\n                <div v-if=\"paymentEntry\" class=\"flex justify-between text-sm\">\n                  <span class=\"text-gray-600\">Payment Entry:</span>\n                  <a :href=\"`/app/payment-entry/${paymentEntry}`\" class=\"text-blue-600 hover:text-blue-700 underline font-semibold\" target=\"_blank\" rel=\"noopener\">{{ paymentEntry }}</a>\n                </div>\n              </div>\n            </div>\n            <!-- Payment Status Message -->\n            <div v-if=\"paymentMessage && (qrStatus === 'PENDING' || qrStatus === 'SCANNED' || qrStatus === 'ERROR' || qrStatus === 'FAILED')\" \n                 class=\"p-4 rounded-lg border\"\n                 :class=\"{\n                   'bg-orange-50 border-orange-200': qrStatus === 'PENDING',\n                   'bg-yellow-50 border-yellow-200': qrStatus === 'SCANNED',\n                   'bg-red-50 border-red-200': qrStatus === 'ERROR' || qrStatus === 'FAILED'\n                 }\">\n              <div class=\"flex items-start\">\n                <svg v-if=\"qrStatus === 'PENDING'\" class=\"w-5 h-5 text-orange-600 mr-2 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                </svg>\n                <svg v-else-if=\"qrStatus === 'SCANNED'\" class=\"w-5 h-5 text-yellow-600 mr-2 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                </svg>\n                <svg v-else class=\"w-5 h-5 text-red-600 mr-2 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"></path>\n                </svg>\n                <div class=\"flex-1\">\n                  <p class=\"text-sm font-medium\" :class=\"{\n                    'text-orange-800': qrStatus === 'PENDING',\n                    'text-yellow-800': qrStatus === 'SCANNED',\n                    'text-red-800': qrStatus === 'ERROR' || qrStatus === 'FAILED'\n                  }\">{{ paymentMessage }}</p>\n                </div>\n              </div>\n            </div>\n            <div class=\"flex gap-3\">\n              <button\n                @click=\"manuallyProcessPayment\"\n                class=\"flex-1 inline-flex items-center justify-center px-4 py-2 border border-green-300 rounded-md shadow-sm text-sm font-medium text-green-700 bg-white hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\n                :disabled=\"!currentTxName || qrStatus === 'SUCCESS'\"\n              >\n                <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n                </svg>\n                Process Payment\n              </button>\n              <button\n                @click=\"regenerateQR\"\n                class=\"flex-1 inline-flex items-center justify-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n              >\n                <svg class=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n                </svg>\n                Reset\n              </button>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- Live Status Logs -->\n      <section v-if=\"statusLogs.length\" class=\"bg-white rounded-xl shadow-lg border border-gray-200 p-8\">\n        <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Live Status Updates</h3>\n        <ul class=\"space-y-3 max-h-72 overflow-y-auto pr-1\">\n          <li v-for=\"log in statusLogs\" :key=\"log.id\" class=\"border border-gray-200 rounded-lg px-4 py-3 bg-gray-50\">\n            <div class=\"flex justify-between items-center mb-1\">\n              <span :class=\"log.levelClass\" class=\"text-sm font-medium\">{{ log.levelLabel }}</span>\n              <span class=\"text-xs text-gray-500\">{{ formatLogTime(log.ts) }}</span>\n            </div>\n            <p class=\"text-sm text-gray-700 whitespace-pre-line break-words\">{{ log.message }}</p>\n          </li>\n        </ul>\n      </section>\n\n      <!-- Beautiful Payment Success Modal Dialog -->\n      <div v-if=\"showSuccessDialog\" class=\"fixed inset-0 z-50 overflow-y-auto\" aria-labelledby=\"modal-title\" role=\"dialog\" aria-modal=\"true\">\n        <!-- Background overlay with blur -->\n        <div class=\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\n          <div class=\"fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm transition-opacity\" aria-hidden=\"true\" @click=\"showSuccessDialog = false\"></div>\n          \n          <!-- Center modal -->\n          <span class=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">&#8203;</span>\n          \n          <div class=\"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full\">\n            <!-- Success Icon with animation -->\n            <div class=\"bg-gradient-to-br from-green-400 to-emerald-500 px-6 pt-8 pb-6\">\n              <div class=\"mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-white shadow-lg animate-bounce-slow\">\n                <svg class=\"h-16 w-16 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" d=\"M5 13l4 4L19 7\"></path>\n                </svg>\n              </div>\n            </div>\n            \n            <div class=\"bg-white px-6 pt-6 pb-4\">\n              <div class=\"text-center\">\n                <h3 class=\"text-3xl leading-6 font-bold text-gray-900 mb-3\" id=\"modal-title\">\n                  üéâ Payment Successful!\n                </h3>\n                <div class=\"mt-4 mb-6\">\n                  <div class=\"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-200\">\n                    <p class=\"text-sm font-medium text-gray-600 mb-2\">Amount Received</p>\n                    <p class=\"text-5xl font-bold text-green-600\">\n                      NPR {{ formatAmount(paymentAmount) }}\n                    </p>\n                  </div>\n                </div>\n                <div class=\"mt-4 space-y-2\">\n                  <p class=\"text-sm text-gray-600\">\n                    <span class=\"font-semibold\">Customer:</span> {{ selectedCustomer?.customer_name }}\n                  </p>\n                  <p v-if=\"paymentEntry\" class=\"text-sm text-gray-600\">\n                    <span class=\"font-semibold\">Payment Entry:</span> \n                    <a :href=\"`/app/payment-entry/${paymentEntry}`\" class=\"text-blue-600 hover:text-blue-800 underline font-semibold\" target=\"_blank\" rel=\"noopener\">\n                      {{ paymentEntry }}\n                    </a>\n                  </p>\n                  <p class=\"text-xs text-gray-500 mt-2\">\n                    {{ new Date().toLocaleString() }}\n                  </p>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"bg-gray-50 px-6 py-4 sm:flex sm:flex-row-reverse gap-3\">\n              <button \n                type=\"button\"\n                @click=\"resetForNextPayment\"\n                class=\"w-full inline-flex justify-center items-center rounded-lg border border-transparent shadow-sm px-6 py-3 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto transition-all duration-200\"\n              >\n                <svg class=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"></path>\n                </svg>\n                Make New Payment\n              </button>\n              <button \n                type=\"button\"\n                @click=\"showSuccessDialog = false\"\n                class=\"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-6 py-3 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto transition-all duration-200\"\n              >\n                OK\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- ADDED BY AI: FONEPAY LIVE SOCKET - Error Dialog -->\n      <section v-if=\"showErrorDialog\" class=\"bg-white rounded-xl shadow-lg border border-red-200 p-8\">\n        <div class=\"text-center space-y-4\">\n          <div class=\"flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mx-auto\">\n            <svg class=\"w-8 h-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </div>\n          <h3 class=\"text-2xl font-bold text-gray-900\">Payment Failed</h3>\n          <p class=\"text-gray-600\">{{ paymentMessage }}</p>\n          <div class=\"flex gap-3 justify-center\">\n            <button \n              @click=\"regenerateQRFromDialog\" \n              class=\"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200\"\n            >\n              Regenerate QR\n            </button>\n            <button \n              @click=\"resetAll\" \n              class=\"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors duration-200\"\n            >\n              Reset All\n            </button>\n          </div>\n        </div>\n      </section>\n    </main>\n\n    <!-- ADDED BY AI: FONEPAY LIVE SOCKET - Loading Overlay -->\n    <LoadingOverlay v-if=\"showLoadingOverlay\" />\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted, onUnmounted, nextTick } from 'vue'\nimport { Autocomplete, createResource, call as $call } from 'frappe-ui'\nimport { session } from '@/data/session'\nimport LoadingOverlay from '@/components/LoadingOverlay.vue'\n\nconst selectedCustomer = ref(null)\nconst selectedCustomerValue = ref(null)\nconst customerOptions = ref([])\nconst loadingCustomers = ref(false)\nconst paymentAmount = ref('')\nconst remarks = ref('')\nconst generating = ref(false)\nconst qrData = ref(null)\nconst qrStatus = ref(null)\nconst paymentEntry = ref(null)\nconst websocketUrl = ref('')\nconst merchantWebsocketUrl = ref('')\nconst statusLogs = ref([])\n\n// ADDED BY AI: FONEPAY LIVE SOCKET - New state for loading overlay and dialogs\nconst showLoadingOverlay = ref(false)\nconst showSuccessDialog = ref(false)\nconst showErrorDialog = ref(false)\nconst paymentMessage = ref('')\n\nconst customerSearchResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.search_customers',\n  auto: false,\n})\nconst qrCreateResource = createResource({ url: 'custom_erp.custom_erp.api.fonepay.create_dynamic_qr', auto: false })\n\nlet realtimeHandler = null\nconst merchantSocket = ref(null)\nconst currentTxName = ref(null)\n\nconst canGenerate = computed(() => {\n  const amount = Number(paymentAmount.value)\n  const result = Boolean(selectedCustomer.value && amount > 0)\n  console.log('canGenerate check:', { \n    hasCustomer: !!selectedCustomer.value, \n    customerName: selectedCustomer.value?.name,\n    amount, \n    result \n  })\n  return result\n})\nconst statusColorClass = computed(() => getStatusColor(qrStatus.value))\n\n// Watch for changes to selectedCustomerValue and update selectedCustomer\nwatch(selectedCustomerValue, (newValue) => {\n  console.log('selectedCustomerValue changed:', newValue)\n  if (!newValue) {\n    selectedCustomer.value = null\n    return\n  }\n  // Frappe UI Autocomplete passes the entire object, not just the value\n  // Check if newValue is an object or a primitive\n  let option = null\n  if (typeof newValue === 'object' && newValue !== null) {\n    // newValue is the option object itself\n    option = newValue\n  } else {\n    // newValue is a string/primitive, find the option\n    option = customerOptions.value.find(opt => opt.value === newValue)\n  }\n  \n  console.log('Found option:', option)\n  if (option) {\n    selectedCustomer.value = {\n      name: option.value || option.name,\n      customer_name: option.customer_name,\n      customer_group: option.customer_group,\n      territory: option.territory,\n      customer_primary_address: option.customer_primary_address,\n      address_display: option.address_display,\n      mobile_no: option.mobile_no,\n      email_id: option.email_id,\n    }\n    console.log('Set selectedCustomer:', selectedCustomer.value)\n    pushStatusLog('info', `Selected customer ${selectedCustomer.value.customer_name} (${selectedCustomer.value.name})`)\n  }\n})\n\nconst loadCustomers = async (query = '') => {\n  loadingCustomers.value = true\n  try {\n    // Load all customers with high limit to ensure none are excluded\n    const response = await customerSearchResource.fetch({ query, limit: 10000 })\n    const payload = response?.customers || response?.message?.customers || []\n    customerOptions.value = payload.map((customer) => ({\n      label: `${customer.customer_name} (${customer.name})`,\n      value: customer.name,\n      ...customer,\n    }))\n  } catch (error) {\n    console.error('Error loading customers', error)\n  } finally {\n    loadingCustomers.value = false\n  }\n}\n\nconst generateQR = async () => {\n  if (!canGenerate.value || generating.value) {\n    return\n  }\n  generating.value = true\n  qrData.value = null\n  qrStatus.value = null\n  paymentEntry.value = null\n  websocketUrl.value = ''\n  merchantWebsocketUrl.value = ''\n  currentTxName.value = null\n  clearRealtime()\n  closeMerchantSocket()\n  pushStatusLog('info', 'Submitting request to generate QR code...')\n\n  try {\n    const amount = Number(paymentAmount.value) || 0\n    const remarksValue = remarks.value?.trim() || ''\n\n    const response = await qrCreateResource.fetch({\n      amount,\n      customer: selectedCustomer.value.name,\n      remarks1: remarksValue,\n      remarks2: '',\n    })\n\n    if (!response?.qr_message) {\n      throw new Error('No QR message returned by Fonepay')\n    }\n\n    qrData.value = response\n    qrStatus.value = response.status || 'CREATED'\n    websocketUrl.value = response.websocket_url || ''\n    merchantWebsocketUrl.value = response.merchant_websocket_url || ''\n    currentTxName.value = response.tx_name\n\n    pushStatusLog('success', 'QR code created successfully. Awaiting payment events...')\n\n    await renderQRCode(response.qr_message)\n    \n    // BULLETPROOF FIX: Ensure Vue's reactive system and DOM are 100% ready\n    // Multiple layers of safety to guarantee WebSocket works first time\n    await nextTick() // Wait for Vue's reactive updates\n    await nextTick() // Double nextTick for extra safety\n    await new Promise(resolve => setTimeout(resolve, 300)) // Additional time for DOM\n    \n    // Subscribe to Frappe realtime events\n    subscribeToUpdates(response.tx_name)\n    \n    // Connect to merchant WebSocket - now with bulletproof initialization\n    await connectMerchantSocketRobust(response.merchant_websocket_url || response.websocket_url)\n  } catch (error) {\n    console.error('Error generating QR', error)\n    pushStatusLog('error', `Failed to generate QR code: ${error.message || error}`)\n    alert(`Failed to generate QR code: ${error.message || error}`)\n  } finally {\n    generating.value = false\n  }\n}\n\nconst renderQRCode = async (qrMessage) => {\n  if (!qrMessage) return\n  if (!window.QRCode) {\n    const script = document.createElement('script')\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js'\n    document.head.appendChild(script)\n    await new Promise((resolve) => {\n      script.onload = resolve\n      script.onerror = resolve\n    })\n  }\n  \n  // Wait for Vue to render the DOM element\n  await new Promise(resolve => setTimeout(resolve, 100))\n  \n  const qrContainer = document.getElementById('qr-code')\n  if (qrContainer) {\n    // Completely clear the container\n    qrContainer.innerHTML = ''\n    \n    // Force DOM reflow to ensure clean slate\n    void qrContainer.offsetHeight\n    \n    try {\n      new window.QRCode(qrContainer, {\n        text: qrMessage,\n        width: 256,\n        height: 256,\n        correctLevel: window.QRCode.CorrectLevel.M,\n      })\n      console.log('‚úÖ QR code rendered successfully')\n      pushStatusLog('success', 'QR code displayed.')\n    } catch (error) {\n      console.error('Unable to render QR code', error)\n      pushStatusLog('error', 'Unable to render QR code in the browser.')\n    }\n  } else {\n    console.warn('‚ö†Ô∏è QR container element not found')\n    pushStatusLog('warning', 'QR container not ready, retrying...')\n    // Retry once after a longer delay\n    await new Promise(resolve => setTimeout(resolve, 300))\n    const retryContainer = document.getElementById('qr-code')\n    if (retryContainer) {\n      retryContainer.innerHTML = ''\n      try {\n        new window.QRCode(retryContainer, {\n          text: qrMessage,\n          width: 256,\n          height: 256,\n          correctLevel: window.QRCode.CorrectLevel.M,\n        })\n        console.log('‚úÖ QR code rendered on retry')\n      } catch (error) {\n        console.error('Unable to render QR code on retry', error)\n      }\n    }\n  }\n}\n\n// BULLETPROOF WebSocket Connection - Guaranteed to work on first load!\nconst connectMerchantSocketRobust = async (url) => {\n  console.log('üöÄ [WEBSOCKET-ROBUST] ================================================')\n  console.log('üöÄ [WEBSOCKET-ROBUST] Starting BULLETPROOF connection sequence')\n  console.log('üöÄ [WEBSOCKET-ROBUST] URL:', url)\n  console.log('üöÄ [WEBSOCKET-ROBUST] Time:', new Date().toISOString())\n  console.log('üöÄ [WEBSOCKET-ROBUST] ================================================')\n  \n  if (!url || typeof WebSocket === 'undefined') {\n    console.error('‚ùå [WEBSOCKET-ROBUST] Invalid parameters - cannot connect')\n    pushStatusLog('error', 'WebSocket unavailable or URL missing')\n    return Promise.reject(new Error('WebSocket unavailable'))\n  }\n  \n  // Close any existing connection\n  closeMerchantSocket()\n  \n  pushStatusLog('info', 'üîå Initializing merchant websocket connection...')\n  \n  return new Promise((resolve, reject) => {\n    try {\n      // Create WebSocket instance\n      const ws = new WebSocket(url)\n      \n      // CRITICAL: Store reference IMMEDIATELY - before any handlers\n      merchantSocket.value = ws\n      console.log('‚úì [WEBSOCKET-ROBUST] Socket instance created and stored')\n      console.log('‚úì [WEBSOCKET-ROBUST] Initial readyState:', ws.readyState, '(0=CONNECTING)')\n      \n      // Set up connection timeout (30 seconds)\n      const connectionTimeout = setTimeout(() => {\n        if (ws.readyState !== WebSocket.OPEN) {\n          console.error('‚è±Ô∏è [WEBSOCKET-ROBUST] Connection timeout!')\n          ws.close()\n          merchantSocket.value = null\n          reject(new Error('WebSocket connection timeout'))\n        }\n      }, 30000)\n      \n      // Handler: Connection opened successfully\n      ws.onopen = () => {\n        clearTimeout(connectionTimeout)\n        console.log('‚úÖ [WEBSOCKET-ROBUST] ====== CONNECTION ESTABLISHED ======')\n        console.log('‚úÖ [WEBSOCKET-ROBUST] ReadyState:', ws.readyState, '(1=OPEN)')\n        console.log('‚úÖ [WEBSOCKET-ROBUST] Socket stored:', !!merchantSocket.value)\n        console.log('‚úÖ [WEBSOCKET-ROBUST] Ready to receive messages!')\n        console.log('‚úÖ [WEBSOCKET-ROBUST] ====================================')\n        pushStatusLog('success', '‚úÖ Merchant websocket CONNECTED and READY!')\n        resolve(ws)\n      }\n      \n      // Handler: Connection error\n      ws.onerror = (event) => {\n        clearTimeout(connectionTimeout)\n        console.error('‚ùå [WEBSOCKET-ROBUST] Error event:', event)\n        console.error('‚ùå [WEBSOCKET-ROBUST] ReadyState:', ws.readyState)\n        pushStatusLog('error', '‚ùå WebSocket connection error')\n        // Don't reject here - wait for onclose\n      }\n      \n      // Handler: Connection closed\n      ws.onclose = (event) => {\n        clearTimeout(connectionTimeout)\n        console.log('üîå [WEBSOCKET-ROBUST] Connection closed')\n        console.log('üîå [WEBSOCKET-ROBUST] Code:', event.code)\n        console.log('üîå [WEBSOCKET-ROBUST] Reason:', event.reason)\n        console.log('üîå [WEBSOCKET-ROBUST] Clean:', event.wasClean)\n        merchantSocket.value = null\n        pushStatusLog('warning', `WebSocket disconnected (${event.code})`)\n        \n        if (ws.readyState !== WebSocket.OPEN) {\n          reject(new Error(`WebSocket closed before opening (code: ${event.code})`))\n        }\n      }\n      \n      // Handler: MESSAGE RECEIVED - This is the most critical part!\n      ws.onmessage = async (event) => {\n        console.log('üéâ [WEBSOCKET-ROBUST] ================================================')\n        console.log('üéâ [WEBSOCKET-ROBUST] ‚ö° MESSAGE RECEIVED ‚ö°')\n        console.log('üéâ [WEBSOCKET-ROBUST] Time:', new Date().toISOString())\n        console.log('üéâ [WEBSOCKET-ROBUST] Socket state:', ws.readyState)\n        console.log('üéâ [WEBSOCKET-ROBUST] Stored ref valid:', !!merchantSocket.value)\n        console.log('üéâ [WEBSOCKET-ROBUST] Raw data:', event.data)\n        console.log('üéâ [WEBSOCKET-ROBUST] ================================================')\n        \n        pushStatusLog('ws', `üì® WS Message: ${event.data}`)\n        \n        let data = null\n        try {\n          data = JSON.parse(event.data || '{}')\n          console.log('üì¶ [WEBSOCKET-ROBUST] Parsed data:', JSON.stringify(data, null, 2))\n        } catch (error) {\n          console.warn('‚ö†Ô∏è [WEBSOCKET-ROBUST] Non-JSON message, ignoring')\n          return\n        }\n        \n        // Process the payment status data\n        if (data && typeof data === 'object') {\n          console.log('üîç [WEBSOCKET-ROBUST] Processing payment data...')\n          console.log('üîç [WEBSOCKET-ROBUST] Fields:', Object.keys(data))\n          console.log('üîç [WEBSOCKET-ROBUST] transactionStatus:', data.transactionStatus)\n          console.log('üîç [WEBSOCKET-ROBUST] productNumber:', data.productNumber)\n          \n          // Call the payment processor\n          await handleWebSocketPaymentUpdate(data)\n        }\n      }\n      \n      console.log('‚úì [WEBSOCKET-ROBUST] All handlers attached successfully')\n      console.log('‚úì [WEBSOCKET-ROBUST] Waiting for connection to open...')\n      \n    } catch (error) {\n      console.error('‚ùå [WEBSOCKET-ROBUST] Exception during setup:', error)\n      merchantSocket.value = null\n      pushStatusLog('error', `WebSocket setup failed: ${error.message}`)\n      reject(error)\n    }\n  })\n}\n\n// Extract WebSocket message handling into separate function for clarity\nconst handleWebSocketPaymentUpdate = async (data) => {\n  try {\n    console.log('üí≥ [PAYMENT-UPDATE] ========== PROCESSING PAYMENT UPDATE ==========')\n    console.log('üí≥ [PAYMENT-UPDATE] Raw data:', JSON.stringify(data, null, 2))\n    \n    // Parse transaction status - handle multiple formats\n    let isSuccess = false\n    let isFailed = false\n    let isScanned = false\n    let parsedStatus = null\n    \n    // Try to parse transactionStatus if it's a JSON string\n    if (data.transactionStatus && typeof data.transactionStatus === 'string') {\n      try {\n        parsedStatus = JSON.parse(data.transactionStatus)\n        console.log('üí≥ [PAYMENT-UPDATE] Parsed transactionStatus:', parsedStatus)\n        \n        if (parsedStatus.qrVerified === true && parsedStatus.paymentSuccess !== true) {\n          isScanned = true\n          console.log('üí≥ [PAYMENT-UPDATE] ‚úÖ QR VERIFIED (scanned but not paid)')\n        }\n        else if (parsedStatus.paymentSuccess === true || parsedStatus.success === true) {\n          isSuccess = true\n          console.log('üí≥ [PAYMENT-UPDATE] ‚úÖ PAYMENT SUCCESS!')\n        } \n        else if (parsedStatus.paymentSuccess === false || parsedStatus.success === false) {\n          isFailed = true\n          console.log('üí≥ [PAYMENT-UPDATE] ‚ùå PAYMENT FAILED')\n        }\n      } catch (e) {\n        console.warn('üí≥ [PAYMENT-UPDATE] Could not parse transactionStatus as JSON:', e)\n      }\n    }\n    \n    // Check if transactionStatus is already an object\n    if (!isSuccess && !isFailed && data.transactionStatus && typeof data.transactionStatus === 'object') {\n      const status = String(data.transactionStatus).toUpperCase()\n      console.log('üí≥ [PAYMENT-UPDATE] Object status:', status)\n      isSuccess = status === 'SUCCESS' || status === 'COMPLETED'\n      isFailed = status === 'FAILED'\n      isScanned = status === 'INITIATED' || status === 'VERIFIED'\n    }\n    \n    // Check root level fields\n    if (!isSuccess && !isFailed) {\n      isSuccess = data.paymentSuccess === true || data.success === true\n      isFailed = data.paymentSuccess === false || data.success === false\n    }\n    \n    console.log('üí≥ [PAYMENT-UPDATE] Status flags:', { isSuccess, isFailed, isScanned })\n    \n    // HANDLE PAYMENT SUCCESS\n    if (isSuccess) {\n      console.log('üéâ [PAYMENT-UPDATE] ========== PAYMENT SUCCESS DETECTED! ==========')\n      showLoadingOverlay.value = true\n      pushStatusLog('success', 'üéâ Payment success detected! Verifying with backend...')\n      \n      try {\n        // Get PRN from parsed data\n        const prnRef = parsedStatus ? String(parsedStatus.productNumber || parsedStatus.prn || '') : ''\n        console.log('üí≥ [PAYMENT-UPDATE] PRN for verification:', prnRef)\n        console.log('üí≥ [PAYMENT-UPDATE] Calling check_status API...')\n        \n        // Verify payment with backend\n        const verify = await $call('custom_erp.custom_erp.api.fonepay.check_status', {\n          txn_ref_id: prnRef || currentTxName.value\n        })\n        \n        console.log('üí≥ [PAYMENT-UPDATE] Backend verification response:', verify)\n        \n        if (verify && verify.status === 'SUCCESS') {\n          console.log('‚úÖ [PAYMENT-UPDATE] Backend confirmed SUCCESS!')\n          qrStatus.value = 'SUCCESS'\n          paymentEntry.value = verify.payment_entry || paymentEntry.value\n          paymentMessage.value = 'Payment confirmed successfully! Amount: NPR ' + formatAmount(paymentAmount.value)\n          pushStatusLog('success', '‚úÖ Backend verification complete. Payment Entry: ' + paymentEntry.value)\n          \n          // Show success UI\n          removeQrAndShowSuccess()\n        } else {\n          console.error('‚ùå [PAYMENT-UPDATE] Backend verification failed!')\n          qrStatus.value = 'FAILED'\n          paymentMessage.value = 'Verification failed: ' + (verify?.message || 'Unknown error')\n          pushStatusLog('error', '‚ùå Backend verification failed: ' + paymentMessage.value)\n          showFailedDialog()\n        }\n      } catch (error) {\n        console.error('‚ùå [PAYMENT-UPDATE] Verification error:', error)\n        qrStatus.value = 'FAILED'\n        paymentMessage.value = 'Verification error: ' + (error.message || error)\n        pushStatusLog('error', '‚ùå Verification API error: ' + paymentMessage.value)\n        showFailedDialog()\n      } finally {\n        showLoadingOverlay.value = false\n      }\n    }\n    // HANDLE PAYMENT FAILED\n    else if (isFailed) {\n      console.log('‚ùå [PAYMENT-UPDATE] ========== PAYMENT FAILED ==========')\n      showLoadingOverlay.value = false\n      qrStatus.value = 'FAILED'\n      paymentMessage.value = data.responseMessage || data.message || 'Payment failed.'\n      pushStatusLog('error', '‚ùå Payment failed: ' + paymentMessage.value)\n      showFailedDialog()\n    }\n    // HANDLE QR SCANNED\n    else if (isScanned) {\n      console.log('üëÄ [PAYMENT-UPDATE] ========== QR SCANNED ==========')\n      qrStatus.value = 'SCANNED'\n      pushStatusLog('info', 'üëÄ QR code scanned by customer. Waiting for payment confirmation...')\n    }\n    // HANDLE OTHER UPDATES\n    else {\n      console.log('‚ÑπÔ∏è [PAYMENT-UPDATE] Other status update')\n      pushStatusLog('info', 'Payment status update: ' + JSON.stringify(data.transactionStatus))\n    }\n    \n    console.log('üí≥ [PAYMENT-UPDATE] ========== UPDATE PROCESSING COMPLETE ==========')\n    \n  } catch (error) {\n    console.error('‚ùå [PAYMENT-UPDATE] Error processing update:', error)\n    pushStatusLog('error', `Error processing payment update: ${error.message}`)\n    showLoadingOverlay.value = false\n  }\n}\n\n// [OLD FUNCTION REMOVED] - Now using connectMerchantSocketRobust instead\n\n// Keeping old function commented for reference if needed\n/*\nconst connectMerchantSocket = (url) => {\n  if (!url || typeof WebSocket === 'undefined') {\n    console.warn('‚ö†Ô∏è WebSocket not available or URL missing:', url)\n    pushStatusLog('warning', 'WebSocket unavailable or URL missing: ' + url)\n    return\n  }\n  \n  // Close any existing connection first\n  closeMerchantSocket()\n  \n  console.log('üîå [WEBSOCKET] Attempting to connect to:', url)\n  console.log('üîå [WEBSOCKET] Current time:', new Date().toISOString())\n  pushStatusLog('info', 'Connecting to merchant websocket: ' + url)\n  \n  try {\n    // ADDED BY AI: FONEPAY LIVE SOCKET - Connect to Fonepay live WebSocket\n    const ws = new WebSocket(url)\n    \n    // CRITICAL FIX: Store socket reference IMMEDIATELY before setting handlers\n    // This ensures the reference is available even if handlers fire quickly\n    merchantSocket.value = ws\n    \n    console.log('üîå [WEBSOCKET] WebSocket object created, readyState:', ws.readyState)\n    console.log('üîå [WEBSOCKET] Setting up event handlers...')\n    \n    ws.onopen = () => {\n      console.log('‚úÖ [WEBSOCKET] Connection OPENED! ReadyState:', ws.readyState)\n      console.log('‚úÖ [WEBSOCKET] Socket reference stored:', !!merchantSocket.value)\n      pushStatusLog('success', 'Merchant websocket connected and ready to receive messages.')\n    }\n    \n    ws.onerror = (event) => {\n      console.error('‚ùå [WEBSOCKET] Error occurred:', event)\n      console.error('‚ùå [WEBSOCKET] ReadyState:', ws.readyState)\n      pushStatusLog('warning', 'Merchant websocket reported an error.')\n    }\n    \n    ws.onclose = (event) => {\n      console.log('üîå [WEBSOCKET] Connection CLOSED')\n      console.log('üîå [WEBSOCKET] Close code:', event.code)\n      console.log('üîå [WEBSOCKET] Close reason:', event.reason)\n      console.log('üîå [WEBSOCKET] Was clean:', event.wasClean)\n      pushStatusLog('warning', `Merchant websocket disconnected. Code: ${event.code}`)\n    }\n    \n    // CRITICAL FIX: Define onmessage handler inline and immediately\n    // This ensures it's ready before any messages arrive\n    ws.onmessage = async (event) => {\n      console.log('üéâ [WEBSOCKET] ========================================')\n      console.log('üéâ [WEBSOCKET] MESSAGE RECEIVED!')\n      console.log('üéâ [WEBSOCKET] Timestamp:', new Date().toISOString())\n      console.log('üéâ [WEBSOCKET] Raw data:', event.data)\n      console.log('üéâ [WEBSOCKET] ========================================')\n      pushStatusLog('ws', `WS Message: ${event.data}`)\n      \n      let data = null\n      try {\n        data = JSON.parse(event.data || '{}')\n        console.log('üì¶ Parsed WebSocket data:', data)\n      } catch (error) {\n        console.warn('‚ö†Ô∏è Failed to parse WebSocket message as JSON:', error)\n        // ignore non-JSON messages\n        return\n      }\n      \n      // ADDED BY AI: FONEPAY LIVE SOCKET - Handle both new and old field formats\n      if (data && typeof data === 'object') {\n        console.log('üîç Checking payment status in WebSocket data...')\n        console.log('  Fields present:', Object.keys(data))\n        console.log('  transactionStatus:', data.transactionStatus)\n        console.log('  paymentSuccess:', data.paymentSuccess)\n        console.log('  success:', data.success)\n        \n        let isSuccess = false\n        let isFailed = false\n        let isScanned = false\n        let parsedStatus = null\n        \n        // CRITICAL FIX: transactionStatus is a JSON STRING, not an object!\n        if (data.transactionStatus && typeof data.transactionStatus === 'string') {\n          try {\n            parsedStatus = JSON.parse(data.transactionStatus)\n            console.log('  üîì Parsed transactionStatus string:', parsedStatus)\n            \n            // Now check the parsed object\n            if (parsedStatus.qrVerified === true && parsedStatus.paymentSuccess == null) {\n              isScanned = true\n              console.log('  ‚úÖ QR VERIFIED detected!')\n            }\n            else if (parsedStatus.paymentSuccess === true || parsedStatus.success === true) {\n              isSuccess = true\n              console.log('  ‚úÖ SUCCESS detected in parsed transactionStatus!')\n            } else if (parsedStatus.paymentSuccess === false || parsedStatus.success === false) {\n              isFailed = true\n              console.log('  ‚úÖ FAILURE detected in parsed transactionStatus!')\n            } \n          } catch (e) {\n            console.warn('  ‚ö†Ô∏è Failed to parse transactionStatus as JSON:', e)\n          }\n        }\n        \n        // Check if transactionStatus is already an object (NEW format)\n        if (!isSuccess && !isFailed && data.transactionStatus && typeof data.transactionStatus === 'object') {\n          const status = String(data.transactionStatus).toUpperCase()\n          console.log('  ‚úÖ Using NEW format (object): transactionStatus =', status)\n          isSuccess = status === 'SUCCESS' || status === 'COMPLETED'\n          isFailed = status === 'FAILED'\n          isScanned = status === 'INITIATED'\n        }\n        \n        // Check OLD format (paymentSuccess, success fields at root level) - FALLBACK\n        if (!isSuccess && !isFailed) {\n          console.log('  ‚úÖ Checking OLD format (root level)...')\n          isSuccess = data.paymentSuccess === true || data.success === true\n          isFailed = data.paymentSuccess === false || data.success === false\n          if (isSuccess) console.log('  ‚úÖ Using OLD format: payment success detected')\n          if (isFailed) console.log('  ‚úÖ Using OLD format: payment failure detected')\n        }\n        \n        console.log('  Result: isSuccess=', isSuccess, 'isFailed=', isFailed, 'isScanned=', isScanned)\n        \n        if (isSuccess) {\n          console.log('üéâ Payment SUCCESS detected via WebSocket!')\n          showLoadingOverlay.value = true\n          pushStatusLog('success', 'Payment success detected! Verifying with backend...')\n          let prnFromDataRES = null\n          prnFromDataRES = JSON.parse(data.transactionStatus)\n          try {\n            // Extract productNumber (PRN) from parsed transactionStatus - this is our tx_name\n            const prnRef = String(prnFromDataRES.productNumber ||  \"\")\n            console.log('  üìû Calling check_status with txn_ref_id:', prnRef)\n            \n            const verify = await $call('custom_erp.custom_erp.api.fonepay.check_status', {\n              txn_ref_id: prnRef\n            })\n            \n            console.log('Backend verification response:', verify)\n            \n            if (verify && verify.status === 'SUCCESS') {\n              qrStatus.value = 'SUCCESS'\n              paymentEntry.value = verify.payment_entry || paymentEntry.value\n              paymentMessage.value = 'Payment confirmed successfully.'\n              pushStatusLog('success', 'Backend verification complete. Payment Entry: ' + paymentEntry.value)\n              removeQrAndShowSuccess()\n            } else {\n              qrStatus.value = 'FAILED'\n              paymentMessage.value = 'Verification failed: ' + (verify?.message || 'Unknown error')\n              pushStatusLog('error', 'Backend verification failed: ' + paymentMessage.value)\n              showFailedDialog()\n            }\n          } catch (error) {\n            console.error('Verification error:', error)\n            qrStatus.value = 'FAILED'\n            paymentMessage.value = 'Verification error: ' + (error.message || error)\n            pushStatusLog('error', 'Verification API error: ' + paymentMessage.value)\n            showFailedDialog()\n          } finally {\n            showLoadingOverlay.value = false\n          }\n        } else if (isFailed) {\n          showLoadingOverlay.value = false\n          qrStatus.value = 'FAILED'\n          paymentMessage.value = data.responseMessage || data.message || 'Payment failed.'\n          pushStatusLog('error', 'Payment failed: ' + paymentMessage.value)\n          showFailedDialog()\n        } else if (isScanned) {\n          qrStatus.value = 'SCANNED'\n          pushStatusLog('info', 'QR code scanned by customer.')\n        }\n      }\n      \n      // Also process via existing realtime handler for backward compatibility\n      processRealtimeUpdate(data)\n    }\n    // merchantSocket.value already set at the top for immediate availability\n  } catch (error) {\n    console.error('Unable to connect merchant websocket', error)\n    pushStatusLog('error', 'Unable to connect merchant websocket. Server-side listener will continue tracking the payment.')\n    // Clear the socket reference on error\n    merchantSocket.value = null\n  }\n}\n*/\n// [END OF OLD FUNCTION]\n\nconst subscribeToUpdates = (txName) => {\n  if (!(window.frappe && frappe.realtime)) {\n    pushStatusLog('warning', 'Realtime channel is unavailable in this session.')\n    return\n  }\n  clearRealtime()\n  realtimeHandler = (data) => {\n    if (!data || data.tx !== txName) {\n      return\n    }\n    processRealtimeUpdate(data)\n  }\n  frappe.realtime.on('fonepay_update', realtimeHandler)\n}\n\nconst processRealtimeUpdate = (data) => {\n  if (!data) return\n  \n  // ADDED BY AI: FONEPAY LIVE SOCKET - Handle new field names\n  if (data.transactionStatus) {\n    const ts = String(data.transactionStatus).toUpperCase()\n    if (ts === 'SUCCESS' || ts === 'COMPLETED') {\n      qrStatus.value = 'SUCCESS'\n    } else if (ts === 'FAILED') {\n      qrStatus.value = 'FAILED'\n    } else if (ts === 'INITIATED') {\n      qrStatus.value = 'SCANNED'\n    } else {\n      qrStatus.value = ts\n    }\n  } else if (data.status) {\n    qrStatus.value = data.status\n  }\n  \n  if (data.payment_entry) {\n    paymentEntry.value = data.payment_entry\n  }\n  \n  const statusMsg = data.status || data.transactionStatus || 'Unknown'\n  pushStatusLog('event', data.message || `Status updated: ${statusMsg}`, JSON.stringify(data, null, 2))\n  \n  if (data.status === 'SUCCESS' || (data.transactionStatus && String(data.transactionStatus).toUpperCase() === 'SUCCESS')) {\n    pushStatusLog('success', 'Payment successful! Payment Entry has been created and submitted.')\n  }\n}\n\nconst clearRealtime = () => {\n  if (window.frappe && frappe.realtime && realtimeHandler) {\n    frappe.realtime.off('fonepay_update', realtimeHandler)\n  }\n  realtimeHandler = null\n}\n\nconst closeMerchantSocket = () => {\n  if (merchantSocket.value) {\n    try {\n      merchantSocket.value.close()\n    } catch (error) {\n      console.warn('Error closing websocket', error)\n    }\n  }\n  merchantSocket.value = null\n}\n\nconst regenerateQR = () => {\n  qrData.value = null\n  qrStatus.value = null\n  paymentEntry.value = null\n  websocketUrl.value = ''\n  merchantWebsocketUrl.value = ''\n  currentTxName.value = null\n  clearRealtime()\n  closeMerchantSocket()\n  pushStatusLog('info', 'State reset. Ready to generate a new QR code.')\n}\n\n// ADDED BY AI: FONEPAY LIVE SOCKET - Manual payment processing trigger\nconst manuallyProcessPayment = async () => {\n  if (!currentTxName.value) {\n    alert('No transaction to process')\n    return\n  }\n  \n  pushStatusLog('info', 'Manually triggering payment processing...')\n  showLoadingOverlay.value = true\n  \n  try {\n    console.log('üîç Calling check_status API with txn_ref_id:', currentTxName.value)\n    \n    // First check status which will trigger finalization\n    const verify = await $call('custom_erp.custom_erp.api.fonepay.check_status', {\n      txn_ref_id: currentTxName.value,\n    })\n    \n    console.log('‚úÖ Manual verification response:', verify)\n    console.log('Response type:', typeof verify, 'Keys:', Object.keys(verify || {}))\n    pushStatusLog('info', 'Backend verification response: ' + JSON.stringify(verify, null, 2))\n    \n    if (verify && verify.status === 'SUCCESS') {\n      qrStatus.value = 'SUCCESS'\n      paymentEntry.value = verify.payment_entry\n      paymentMessage.value = 'Payment processed successfully.'\n      pushStatusLog('success', 'Payment Entry created: ' + paymentEntry.value)\n      removeQrAndShowSuccess()\n    } else if (verify && verify.status === 'VERIFIED_NOT_PAID') {\n      qrStatus.value = 'SCANNED'\n      pushStatusLog('info', 'QR code has been scanned/verified but payment not yet completed.')\n      // Update UI to show scanned status - customer has opened payment app but not confirmed\n      paymentMessage.value = verify.message || '‚úÖ QR Code Scanned! Customer has opened their payment app but has not completed the payment yet. Please wait for them to confirm and complete the payment. Keep this QR visible.'\n      // Don't remove QR, keep it visible so customer can still pay\n    } else if (verify && verify.status === 'PENDING') {\n      qrStatus.value = 'PENDING'\n      pushStatusLog('warning', 'Payment is still pending. Customer may not have scanned QR yet.')\n      // Update UI to show pending status instead of error\n      paymentMessage.value = verify.message || '‚è≥ Payment Pending. Customer has not yet scanned the QR code. Please ask the customer to scan and pay. Keep this QR visible.'\n      // Don't remove QR, keep it visible so customer can still pay\n    } else if (verify && verify.status === 'FAILED') {\n      qrStatus.value = 'FAILED'\n      pushStatusLog('error', 'Payment failed: ' + (verify.message || 'Payment was declined or cancelled'))\n      paymentMessage.value = verify.message || '‚ùå Payment Failed. The payment was declined or cancelled by the customer. You may need to generate a new QR code.'\n      // Show failed dialog for actual failures\n      showFailedDialog()\n    } else if (verify && verify.status === 'ERROR') {\n      qrStatus.value = 'ERROR'\n      pushStatusLog('error', 'Payment verification error: ' + (verify.message || 'Unknown error'))\n      paymentMessage.value = verify.message || '‚ö†Ô∏è Verification Error. Unable to verify payment status with Fonepay. Please check the transaction manually or try again.'\n      // Show error as status message, not dialog\n    } else {\n      qrStatus.value = 'UNKNOWN'\n      pushStatusLog('error', 'Unexpected response: ' + JSON.stringify(verify))\n      paymentMessage.value = '‚ùì Unknown Status. Received unexpected response from server. Please check status logs or contact support.'\n    }\n  } catch (error) {\n    console.error('‚ùå Manual processing error:', error)\n    pushStatusLog('error', 'Error processing payment: ' + (error.message || JSON.stringify(error)))\n    alert('Error processing payment: ' + (error.message || JSON.stringify(error)))\n  } finally {\n    showLoadingOverlay.value = false\n  }\n}\n\n// ADDED BY AI: FONEPAY LIVE SOCKET - UI helper methods for success/failure flows\nconst removeQrAndShowSuccess = () => {\n  qrData.value = null\n  showSuccessDialog.value = true\n  closeMerchantSocket()\n  clearRealtime()\n  pushStatusLog('success', 'Payment successfully verified and processed!')\n}\n\nconst showFailedDialog = () => {\n  qrData.value = null\n  showErrorDialog.value = true\n}\n\nconst resetForNextPayment = () => {\n  showSuccessDialog.value = false\n  paymentAmount.value = ''\n  remarks.value = ''\n  qrStatus.value = null\n  paymentEntry.value = null\n  statusLogs.value = []\n  pushStatusLog('info', 'Ready for next payment.')\n}\n\nconst regenerateQRFromDialog = () => {\n  showErrorDialog.value = false\n  qrData.value = null\n  qrStatus.value = null\n  paymentEntry.value = null\n  websocketUrl.value = ''\n  merchantWebsocketUrl.value = ''\n  currentTxName.value = null\n  clearRealtime()\n  closeMerchantSocket()\n  pushStatusLog('info', 'Ready to regenerate QR code.')\n}\n\nconst resetAll = () => {\n  showErrorDialog.value = false\n  showSuccessDialog.value = false\n  selectedCustomer.value = null\n  selectedCustomerValue.value = null\n  paymentAmount.value = ''\n  remarks.value = ''\n  qrData.value = null\n  qrStatus.value = null\n  paymentEntry.value = null\n  websocketUrl.value = ''\n  merchantWebsocketUrl.value = ''\n  currentTxName.value = null\n  statusLogs.value = []\n  clearRealtime()\n  closeMerchantSocket()\n  pushStatusLog('info', 'Reset complete. Ready for new transaction.')\n}\n\nconst pushStatusLog = (level, message, payload = null) => {\n  const entry = {\n    id: `${Date.now()}-${Math.random()}`,\n    ts: new Date(),\n    level,\n    message,\n    payload,\n    levelLabel: levelLabel(level),\n    levelClass: levelClass(level),\n  }\n  statusLogs.value.unshift(entry)\n  // keep recent 30 entries\n  if (statusLogs.value.length > 30) {\n    statusLogs.value.pop()\n  }\n}\n\nconst levelLabel = (level) => {\n  switch (level) {\n    case 'error':\n      return 'Error'\n    case 'warning':\n      return 'Warning'\n    case 'success':\n      return 'Success'\n    case 'event':\n      return 'Realtime Event'\n    case 'ws':\n      return 'Websocket'\n    default:\n      return 'Info'\n  }\n}\n\nconst levelClass = (level) => {\n  switch (level) {\n    case 'error':\n      return 'text-red-600'\n    case 'warning':\n      return 'text-yellow-600'\n    case 'success':\n      return 'text-green-600'\n    case 'event':\n      return 'text-blue-600'\n    case 'ws':\n      return 'text-purple-600'\n    default:\n      return 'text-gray-600'\n  }\n}\n\nconst getStatusColor = (status) => {\n  switch ((status || '').toUpperCase()) {\n    case 'CREATED':\n      return 'text-blue-600'\n    case 'SCANNED':\n      return 'text-yellow-600'\n    case 'VERIFIED':\n      return 'text-indigo-600'\n    case 'PENDING':\n      return 'text-orange-600'\n    case 'SUCCESS':\n      return 'text-green-600'\n    case 'FAILED':\n      return 'text-red-600'\n    case 'ERROR':\n      return 'text-red-700'\n    case 'UNKNOWN':\n      return 'text-gray-500'\n    default:\n      return 'text-gray-600'\n  }\n}\n\nconst formatAmount = (amount) => {\n  const num = Number(amount) || 0\n  return num.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })\n}\n\nconst formatLogTime = (ts) => {\n  return new Date(ts).toLocaleString()\n}\n\n\nonMounted(async () => {\n  await loadCustomers()\n  pushStatusLog('info', 'Ready to generate Fonepay QR codes for customers.')\n})\n\nonUnmounted(() => {\n  clearRealtime()\n  closeMerchantSocket()\n})\n</script>\n\n<style scoped>\n/* Custom animations for success UI */\n@keyframes pulse-slow {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.9;\n  }\n}\n\n@keyframes bounce-slow {\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-10px);\n  }\n}\n\n.animate-pulse-slow {\n  animation: pulse-slow 3s ease-in-out infinite;\n}\n\n.animate-bounce-slow {\n  animation: bounce-slow 2s ease-in-out infinite;\n}\n\n/* Backdrop blur support */\n.backdrop-blur-sm {\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n}\n/* Existing fadeIn animation */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(6px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\nsection {\n  animation: fadeIn 0.25s ease-out;\n}\n</style>"],"names":["_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","$call","_toDisplayString","_unref","_createVNode","Autocomplete","_normalizeClass","_createTextVNode","_Fragment","_renderList","_createBlock"],"mappings":"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"}