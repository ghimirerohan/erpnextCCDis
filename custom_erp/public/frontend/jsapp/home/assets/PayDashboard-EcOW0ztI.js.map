{"version":3,"file":"PayDashboard-EcOW0ztI.js","sources":["../../../../frontend/src/pages/PayDashboard.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50\">\n    <!-- Header -->\n    <header class=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-20\">\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex justify-between items-center py-4 sm:py-6\">\n          <div class=\"flex items-center space-x-3 sm:space-x-4\">\n            <div class=\"flex items-center justify-center w-10 h-10 sm:w-12 sm:h-12 bg-blue-600 rounded-lg\">\n              <svg class=\"w-5 h-5 sm:w-6 sm:h-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"></path>\n              </svg>\n            </div>\n            <div>\n              <h1 class=\"text-xl sm:text-2xl font-bold text-gray-900\">Pay Dashboard</h1>\n              <p class=\"text-xs sm:text-sm text-gray-600\">Today's Fonepay QR Statistics</p>\n            </div>\n          </div>\n          <button\n            @click=\"session.logout.submit()\"\n            class=\"inline-flex items-center px-3 py-2 sm:px-4 sm:py-2 border border-gray-300 rounded-md shadow-sm text-xs sm:text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            <svg class=\"w-4 h-4 mr-1 sm:mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"></path>\n            </svg>\n            <span class=\"hidden sm:inline\">Logout</span>\n          </button>\n        </div>\n      </div>\n    </header>\n\n    <main class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 space-y-6 sm:space-y-8\">\n      <!-- Top Summary Card -->\n      <section class=\"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8\">\n        <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 sm:gap-6\">\n          <div class=\"space-y-2\">\n            <div class=\"text-xs sm:text-sm text-gray-500\">Today (BS)</div>\n            <div class=\"text-xl sm:text-2xl font-bold text-gray-900\">{{ bsToday || adToday }}</div>\n            <div class=\"text-sm sm:text-base text-gray-700\">\n              <span class=\"font-medium\">{{ summary.current_user_full_name || summary.current_user || session.user }}</span>\n            </div>\n          </div>\n          <div class=\"flex-1 sm:text-center space-y-2 lg:max-w-md lg:mx-auto\">\n            <div class=\"text-xs sm:text-sm uppercase text-gray-600 tracking-wide mb-2\">Today's Total Success</div>\n            <div class=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-blue-600\">NPR {{ formatAmount(summary.total_success_amount) }}</div>\n            <div class=\"text-sm text-gray-500\">{{ summary.total_success_count || 0 }} payments</div>\n            <div v-if=\"summary.unprocessed_count > 0\" class=\"pt-2 border-t border-gray-200\">\n              <div class=\"text-xs text-amber-700 font-medium mb-1\">Unprocessed Transactions</div>\n              <div class=\"text-lg sm:text-xl font-bold text-amber-600\">{{ summary.unprocessed_count }}</div>\n            </div>\n          </div>\n          <div class=\"flex flex-col gap-2\">\n            <button\n              @click=\"refreshAll\"\n              :disabled=\"loading || processingUnprocessed\"\n              class=\"inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 active:scale-95 transition\"\n            >\n              <svg v-if=\"loading\" class=\"animate-spin w-4 h-4 mr-2\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"4\" class=\"opacity-25\"/>\n                <path d=\"M4 12a8 8 0 018-8\" stroke-width=\"4\" class=\"opacity-75\"/>\n              </svg>\n              <svg v-else class=\"w-4 h-4 mr-2\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"/>\n              </svg>\n              Refresh\n            </button>\n            <button\n              v-if=\"summary.unprocessed_count >= 1\"\n              @click=\"processAllUnprocessed\"\n              :disabled=\"processingUnprocessed || loading\"\n              class=\"inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg shadow hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 active:scale-95 transition\"\n            >\n              <svg v-if=\"processingUnprocessed\" class=\"animate-spin w-4 h-4 mr-2\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"4\" class=\"opacity-25\"/>\n                <path d=\"M4 12a8 8 0 018-8\" stroke-width=\"4\" class=\"opacity-75\"/>\n              </svg>\n              <svg v-else class=\"w-4 h-4 mr-2\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n              </svg>\n              Process All ({{ summary.unprocessed_count }})\n            </button>\n          </div>\n        </div>\n      </section>\n\n      <!-- View Mode Switcher and Filters -->\n      <section class=\"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8\">\n        <div class=\"space-y-4\">\n          <!-- View Mode Switcher -->\n          <div>\n            <label class=\"block text-sm font-semibold text-gray-700 mb-2\">View Mode</label>\n            <div class=\"flex flex-wrap gap-2\">\n              <button\n                v-for=\"mode in viewModes\"\n                :key=\"mode.value\"\n                @click=\"selectedViewMode = mode.value\"\n                :class=\"[\n                  'px-4 py-2 rounded-lg text-sm font-medium transition-all',\n                  selectedViewMode === mode.value\n                    ? 'bg-blue-600 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                ]\"\n              >\n                {{ mode.label }}\n              </button>\n            </div>\n          </div>\n\n          <!-- Filters -->\n          <div class=\"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2 border-t border-gray-200\">\n            <!-- Username Filter -->\n            <div>\n              <label class=\"block text-sm font-semibold text-gray-700 mb-2\">Filter by Username</label>\n              <select\n                v-model=\"selectedUsername\"\n                @change=\"applyFilters\"\n                class=\"w-full px-3 py-2 h-[44px] border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"\">All Users</option>\n                <option v-for=\"user in usernameOptions\" :key=\"user.value\" :value=\"user.value\">\n                  {{ user.label }}\n                </option>\n              </select>\n            </div>\n\n            <!-- Customer Filter -->\n            <div class=\"customer-select-wrapper\">\n              <label class=\"block text-sm font-semibold text-gray-700 mb-2\">Filter by Customer</label>\n              <div class=\"relative\">\n                <Autocomplete\n                  v-model=\"selectedCustomerValue\"\n                  :options=\"customerOptions\"\n                  :loading=\"loadingCustomers\"\n                  placeholder=\"Search customer by name or code\"\n                  class=\"customer-autocomplete w-full text-sm\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <!-- Active Filters Display -->\n          <div v-if=\"hasActiveFilters\" class=\"pt-2 border-t border-gray-200\">\n            <div class=\"text-xs font-medium text-gray-600 mb-2\">Active Filters:</div>\n            <div class=\"flex flex-wrap gap-2\">\n              <span\n                v-if=\"selectedUsername\"\n                class=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800\"\n              >\n                User: {{ getUsernameLabel(selectedUsername) }}\n                <button @click=\"clearUsernameFilter\" class=\"ml-2 hover:text-blue-600\">\n                  <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                  </svg>\n                </button>\n              </span>\n              <span\n                v-if=\"selectedCustomer\"\n                class=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800\"\n              >\n                Customer: {{ selectedCustomer.customer_name || selectedCustomer.value }}\n                <button @click=\"clearCustomerFilter\" class=\"ml-2 hover:text-green-600\">\n                  <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n                  </svg>\n                </button>\n              </span>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <!-- Processing Result Message -->\n      <section v-if=\"processResult && !processingUnprocessed\" class=\"bg-white rounded-xl shadow-lg border-2 p-6 sm:p-8\" :class=\"processResult.error ? 'border-red-300 bg-red-50' : 'border-green-300 bg-green-50'\">\n        <div class=\"flex items-start gap-3\">\n          <div v-if=\"processResult.error\" class=\"flex-shrink-0\">\n            <svg class=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n          </div>\n          <div v-else class=\"flex-shrink-0\">\n            <svg class=\"w-6 h-6 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n            </svg>\n          </div>\n          <div class=\"flex-1\">\n            <h4 class=\"font-semibold mb-2\" :class=\"processResult.error ? 'text-red-800' : 'text-green-800'\">\n              {{ processResult.error ? 'Processing Error' : 'Processing Complete' }}\n            </h4>\n            <div class=\"text-sm space-y-1\" :class=\"processResult.error ? 'text-red-700' : 'text-green-700'\">\n              <p v-if=\"processResult.error\">{{ processResult.error }}</p>\n              <template v-else>\n                <p><strong>{{ processResult.processed_count }}</strong> transactions processed</p>\n                <p><strong>{{ processResult.success_count }}</strong> successful, <strong>{{ processResult.failed_count }}</strong> failed</p>\n                <p v-if=\"processResult.new_success_amount > 0\" class=\"font-semibold\">\n                  Added NPR {{ formatAmount(processResult.new_success_amount) }} to today's total\n                </p>\n              </template>\n            </div>\n          </div>\n          <button @click=\"processResult = null\" class=\"flex-shrink-0 text-gray-500 hover:text-gray-700\">\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n            </svg>\n          </button>\n        </div>\n      </section>\n\n      <!-- Data Display Section -->\n      <section class=\"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8\">\n        <!-- Loading State -->\n        <div v-if=\"loadingData\" class=\"text-center py-12\">\n          <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p class=\"mt-4 text-gray-600\">Loading data...</p>\n        </div>\n\n        <!-- Empty State -->\n        <div v-else-if=\"!hasData\" class=\"text-center py-12\">\n          <svg class=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path>\n          </svg>\n          <p class=\"mt-4 text-gray-600\">No data found for today.</p>\n        </div>\n\n        <!-- Username-wise View -->\n        <div v-else-if=\"selectedViewMode === 'username'\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Success Amount by Username</h3>\n          <div class=\"space-y-3\">\n            <div\n              v-for=\"item in usernameData\"\n              :key=\"item.username\"\n              :class=\"[\n                'p-4 rounded-lg border-2 transition-all',\n                item.username === session.user\n                  ? 'bg-blue-50 border-blue-200 shadow-md'\n                  : 'bg-gray-50 border-gray-200 hover:shadow-md'\n              ]\"\n            >\n              <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n                <div class=\"flex-1\">\n                  <div class=\"flex items-center gap-2\">\n                    <span class=\"text-base sm:text-lg font-semibold text-gray-900\">{{ item.full_name || item.username }}</span>\n                    <span v-if=\"item.username === session.user\" class=\"px-2 py-0.5 text-xs font-medium bg-blue-600 text-white rounded\">\n                      You\n                    </span>\n                  </div>\n                  <div class=\"text-xs sm:text-sm text-gray-600 mt-1\">{{ item.username }}</div>\n                  <div class=\"text-xs text-gray-500 mt-1\">{{ item.count }} payment{{ item.count !== 1 ? 's' : '' }}</div>\n                </div>\n                <div class=\"text-right\">\n                  <div class=\"text-xl sm:text-2xl font-bold text-blue-600\">NPR {{ formatAmount(item.total_amount) }}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Customer-wise View -->\n        <div v-else-if=\"selectedViewMode === 'customer'\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Success Amount by Customer</h3>\n          <div class=\"space-y-3\">\n            <div\n              v-for=\"item in customerData\"\n              :key=\"item.customer\"\n              class=\"p-4 rounded-lg bg-gray-50 border-2 border-gray-200 hover:shadow-md transition-all\"\n            >\n              <div class=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n                <div class=\"flex-1\">\n                  <div class=\"text-base sm:text-lg font-semibold text-gray-900\">{{ item.customer_name }}</div>\n                  <div class=\"text-xs sm:text-sm text-gray-600 mt-1\">Code: {{ item.customer }}</div>\n                  <div class=\"text-xs text-gray-500 mt-1\">{{ item.count }} payment{{ item.count !== 1 ? 's' : '' }}</div>\n                </div>\n                <div class=\"text-right\">\n                  <div class=\"text-xl sm:text-2xl font-bold text-green-600\">NPR {{ formatAmount(item.total_amount) }}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Transaction-wise View -->\n        <div v-else-if=\"selectedViewMode === 'transaction'\">\n          <h3 class=\"text-lg font-semibold text-gray-900 mb-4\">Transaction Details</h3>\n          <div class=\"overflow-x-auto\">\n            <div class=\"min-w-full space-y-3\">\n              <div\n                v-for=\"txn in transactionData\"\n                :key=\"txn.name\"\n                class=\"p-4 rounded-lg bg-gray-50 border-2 border-gray-200 hover:shadow-md transition-all\"\n              >\n                <div class=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4\">\n                  <div>\n                    <div class=\"text-xs text-gray-500 mb-1\">Amount</div>\n                    <div class=\"text-lg font-bold text-blue-600\">NPR {{ formatAmount(txn.amount) }}</div>\n                  </div>\n                  <div>\n                    <div class=\"text-xs text-gray-500 mb-1\">Customer</div>\n                    <div class=\"text-sm font-medium text-gray-900\">{{ txn.customer_name || txn.customer }}</div>\n                    <div class=\"text-xs text-gray-600\">{{ txn.customer }}</div>\n                  </div>\n                  <div>\n                    <div class=\"text-xs text-gray-500 mb-1\">Created By</div>\n                    <div class=\"text-sm font-medium text-gray-900\">{{ txn.owner_full_name || txn.owner }}</div>\n                    <div class=\"text-xs text-gray-600\">{{ txn.owner }}</div>\n                  </div>\n                  <div>\n                    <div class=\"text-xs text-gray-500 mb-1\">Time</div>\n                    <div class=\"text-sm font-medium text-gray-900\">{{ formatDateTime(txn.creation) }}</div>\n                    <div v-if=\"txn.payment_entry\" class=\"text-xs text-blue-600 mt-1\">\n                      <a :href=\"`/app/payment-entry/${txn.payment_entry}`\" target=\"_blank\" class=\"hover:underline\">\n                        View Payment\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, onMounted } from 'vue'\nimport { Autocomplete, createResource, call as $call } from 'frappe-ui'\nimport { session } from '@/data/session'\n\n// State\nconst summary = ref({\n  current_user: '',\n  current_user_full_name: '',\n  total_success_amount: 0,\n  total_success_count: 0,\n  unprocessed_count: 0,\n})\nconst bsToday = ref('')\nconst adToday = new Date().toISOString().slice(0, 10)\nconst loading = ref(false)\nconst loadingData = ref(false)\nconst loadingCustomers = ref(false)\nconst processingUnprocessed = ref(false)\nconst processResult = ref(null)\n\n// View mode\nconst viewModes = [\n  { value: 'username', label: 'Username-wise' },\n  { value: 'customer', label: 'Customer-wise' },\n  { value: 'transaction', label: 'Transaction-wise' },\n]\nconst selectedViewMode = ref('username')\n\n// Filters\nconst selectedUsername = ref('')\nconst selectedCustomerValue = ref(null)\nconst selectedCustomer = ref(null)\nconst usernameOptions = ref([])\nconst customerOptions = ref([])\n\n// Data\nconst usernameData = ref([])\nconst customerData = ref([])\nconst transactionData = ref([])\n\n// Resources\nconst summaryResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.get_pay_dashboard_summary',\n  auto: false,\n})\n\nconst usernameGroupedResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.get_username_grouped_totals',\n  auto: false,\n})\n\nconst customerGroupedResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.get_customer_grouped_totals',\n  auto: false,\n})\n\nconst transactionListResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.get_transaction_list',\n  auto: false,\n})\n\nconst filterCustomersResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.get_filter_customers_today',\n  auto: false,\n})\n\nconst filterUsernamesResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.get_filter_usernames_today',\n  auto: false,\n})\n\nconst unprocessedCountResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.get_today_unprocessed_count',\n  auto: false,\n})\n\nconst processAllResource = createResource({\n  url: 'custom_erp.custom_erp.api.fonepay.process_all_today_unprocessed',\n  auto: false,\n})\n\n// Computed\nconst hasActiveFilters = computed(() => {\n  return Boolean(selectedUsername.value || selectedCustomer.value)\n})\n\nconst hasData = computed(() => {\n  if (selectedViewMode.value === 'username') return usernameData.value.length > 0\n  if (selectedViewMode.value === 'customer') return customerData.value.length > 0\n  if (selectedViewMode.value === 'transaction') return transactionData.value.length > 0\n  return false\n})\n\n// Methods\nconst formatAmount = (amount) => {\n  const num = Number(amount) || 0\n  return num.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })\n}\n\nconst formatDateTime = (dateTime) => {\n  if (!dateTime) return 'â€”'\n  const d = new Date(dateTime)\n  return d.toLocaleString('en-IN', {\n    hour: '2-digit',\n    minute: '2-digit',\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric',\n  })\n}\n\nconst getUsernameLabel = (username) => {\n  const user = usernameOptions.value.find(u => u.value === username)\n  return user ? user.label : username\n}\n\nconst clearUsernameFilter = () => {\n  selectedUsername.value = ''\n  applyFilters()\n}\n\nconst clearCustomerFilter = () => {\n  selectedCustomerValue.value = null\n  selectedCustomer.value = null\n  applyFilters()\n}\n\nconst loadSummary = async () => {\n  try {\n    const [summaryRes, unprocessedRes] = await Promise.all([\n      summaryResource.fetch(),\n      unprocessedCountResource.fetch(),\n    ])\n    summary.value = {\n      current_user: summaryRes?.current_user || session.user,\n      current_user_full_name: summaryRes?.current_user_full_name || session.user,\n      total_success_amount: Number(summaryRes?.total_success_amount || 0),\n      total_success_count: Number(summaryRes?.total_success_count || 0),\n      unprocessed_count: Number(unprocessedRes?.unprocessed_count || 0),\n    }\n  } catch (error) {\n    console.error('Failed to load summary', error)\n  }\n}\n\nconst loadUsernameData = async () => {\n  loadingData.value = true\n  try {\n    const res = await usernameGroupedResource.fetch({\n      username_filter: selectedUsername.value || undefined,\n    })\n    usernameData.value = res?.grouped_totals || []\n  } catch (error) {\n    console.error('Failed to load username data', error)\n    usernameData.value = []\n  } finally {\n    loadingData.value = false\n  }\n}\n\nconst loadCustomerData = async () => {\n  loadingData.value = true\n  try {\n    const res = await customerGroupedResource.fetch({\n      customer_filter: selectedCustomer.value?.value || undefined,\n      username_filter: selectedUsername.value || undefined,\n    })\n    customerData.value = res?.grouped_totals || []\n  } catch (error) {\n    console.error('Failed to load customer data', error)\n    customerData.value = []\n  } finally {\n    loadingData.value = false\n  }\n}\n\nconst loadTransactionData = async () => {\n  loadingData.value = true\n  try {\n    const res = await transactionListResource.fetch({\n      username_filter: selectedUsername.value || undefined,\n      customer_filter: selectedCustomer.value?.value || undefined,\n      limit: 100,\n    })\n    transactionData.value = res?.transactions || []\n  } catch (error) {\n    console.error('Failed to load transaction data', error)\n    transactionData.value = []\n  } finally {\n    loadingData.value = false\n  }\n}\n\nconst loadFilterOptions = async () => {\n  try {\n    const [customersRes, usernamesRes] = await Promise.all([\n      filterCustomersResource.fetch(),\n      filterUsernamesResource.fetch(),\n    ])\n    \n    customerOptions.value = (customersRes?.customers || []).map(c => ({\n      label: c.label,\n      value: c.value,\n      customer_name: c.customer_name,\n    }))\n    \n    usernameOptions.value = usernamesRes?.usernames || []\n  } catch (error) {\n    console.error('Failed to load filter options', error)\n  }\n}\n\nconst applyFilters = async () => {\n  if (selectedViewMode.value === 'username') {\n    await loadUsernameData()\n  } else if (selectedViewMode.value === 'customer') {\n    await loadCustomerData()\n  } else if (selectedViewMode.value === 'transaction') {\n    await loadTransactionData()\n  }\n}\n\nconst processAllUnprocessed = async () => {\n  if (processingUnprocessed.value || summary.value.unprocessed_count < 1) {\n    return\n  }\n  \n  processingUnprocessed.value = true\n  processResult.value = null\n  \n  try {\n    const res = await processAllResource.fetch()\n    processResult.value = res\n    \n    // Show success message/notification\n    if (res?.success_count > 0) {\n      console.log(`Successfully processed ${res.success_count} transactions. Added NPR ${formatAmount(res.new_success_amount)}`)\n    }\n    \n    // Refresh all data to reflect changes\n    await refreshAll()\n  } catch (error) {\n    console.error('Failed to process unprocessed transactions', error)\n    processResult.value = {\n      error: error.message || 'Failed to process transactions',\n    }\n  } finally {\n    processingUnprocessed.value = false\n  }\n}\n\nconst refreshAll = async () => {\n  loading.value = true\n  try {\n    await Promise.all([\n      loadSummary(),\n      loadFilterOptions(),\n      applyFilters(),\n    ])\n  } finally {\n    loading.value = false\n  }\n}\n\nconst tryLoadNepaliScriptAndSetBSToday = async () => {\n  try {\n    if (typeof window !== 'undefined' && !window.NepaliFunctions) {\n      const s = document.createElement('script')\n      s.src = '/assets/custom_erp/lib/nepali.datepicker.v5.0.6.min.js'\n      document.head.appendChild(s)\n      await new Promise((resolve) => { s.onload = resolve; s.onerror = resolve })\n    }\n    if (typeof window !== 'undefined' && window.NepaliFunctions) {\n      const d = new Date()\n      const bs = window.NepaliFunctions.AD2BS({ year: d.getFullYear(), month: d.getMonth() + 1, day: d.getDate() })\n      bsToday.value = `${bs.year}-${String(bs.month).padStart(2,'0')}-${String(bs.day).padStart(2,'0')}`\n    }\n  } catch (e) {\n    console.warn('Nepali date script failed to load', e)\n  }\n}\n\n// Watch for view mode changes\nwatch(selectedViewMode, async () => {\n  await applyFilters()\n})\n\n// Watch for username filter changes\nwatch(selectedUsername, async () => {\n  await applyFilters()\n})\n\n// Watch for customer selection\nwatch(selectedCustomerValue, (newValue) => {\n  if (!newValue) {\n    selectedCustomer.value = null\n    return\n  }\n  let option = null\n  if (typeof newValue === 'object' && newValue !== null) {\n    option = newValue\n  } else {\n    option = customerOptions.value.find(opt => opt.value === newValue)\n  }\n  if (option) {\n    selectedCustomer.value = option\n    applyFilters()\n  }\n})\n\nonMounted(async () => {\n  await Promise.all([\n    loadSummary(),\n    loadFilterOptions(),\n    tryLoadNepaliScriptAndSetBSToday(),\n  ])\n  await applyFilters()\n})\n</script>\n\n<style scoped>\n/* Ensure mobile-friendly touch targets */\nbutton, select {\n  min-height: 44px;\n}\n\n/* Customer Selection Field UX Improvements */\n.customer-select-wrapper {\n  position: relative;\n}\n\n.customer-autocomplete :deep(input),\n.customer-autocomplete :deep(.frappe-autocomplete-input) {\n  min-height: 44px !important;\n  height: 44px !important;\n  padding: 12px 16px !important;\n  font-size: 16px !important; /* Prevents zoom on iOS */\n  border-radius: 8px;\n  border: 1px solid #d1d5db;\n  transition: all 0.2s;\n}\n\n.customer-autocomplete :deep(input:focus),\n.customer-autocomplete :deep(.frappe-autocomplete-input:focus) {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n\n/* Prevent layout shift when keyboard appears */\n@media (max-width: 768px) {\n  .customer-select-wrapper {\n    scroll-padding-top: 100px;\n  }\n  \n  /* Fix autocomplete dropdown positioning on mobile */\n  .customer-autocomplete :deep(.autocomplete-dropdown),\n  .customer-autocomplete :deep(.frappe-autocomplete-dropdown) {\n    position: fixed !important;\n    max-height: 50vh;\n    overflow-y: auto;\n    z-index: 9999;\n    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  }\n}\n\n@media (max-width: 640px) {\n  /* Optimize spacing for mobile */\n  section {\n    padding: 1rem !important;\n  }\n  \n  /* Prevent horizontal scroll */\n  body {\n    overflow-x: hidden;\n  }\n  \n  /* Better spacing for cards */\n  .bg-white {\n    padding: 1rem !important;\n  }\n}\n\n/* Tablet optimizations */\n@media (min-width: 641px) and (max-width: 1024px) {\n  section {\n    padding: 1.5rem;\n  }\n}\n\n/* Desktop/Laptop optimizations */\n@media (min-width: 1024px) {\n  /* Better spacing for desktop */\n  section {\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n  }\n  \n  /* Improve card layouts */\n  .bg-white {\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n  }\n}\n</style>\n\n"],"names":["_openBlock","_createElementBlock","_createElementVNode","_unref","_toDisplayString","_createTextVNode","_Fragment","_renderList","_normalizeClass","_createVNode","Autocomplete"],"mappings":"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"}