{"version":3,"file":"QRPayAdmin-CMQYri2b.js","sources":["../../../../frontend/src/pages/QRPayAdmin.vue"],"sourcesContent":["<template>\n  <div class=\"min-h-screen bg-gray-50\">\n    <!-- Header -->\n    <div class=\"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-20\">\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div class=\"flex justify-between items-center py-6\">\n          <div>\n            <h1 class=\"text-2xl font-bold text-gray-900\">QRPay Admin</h1>\n            <p class=\"text-sm text-gray-600\">Manage unprocessed Fonepay transactions</p>\n          </div>\n          <Button @click=\"session.logout.submit()\" theme=\"gray\" variant=\"outline\">Logout</Button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 py-4 sm:py-8\">\n      <!-- Action Buttons -->\n      <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-8\">\n        <div class=\"flex flex-wrap gap-4\">\n          <Button \n            @click=\"processSelected\" \n            :loading=\"processing\"\n            :disabled=\"selectedTransactions.length === 0\"\n            theme=\"blue\"\n          >\n            Process Selected ({{ selectedTransactions.length }})\n          </Button>\n          <Button \n            @click=\"processAll\" \n            :loading=\"processing\"\n            theme=\"green\"\n          >\n            Process All ({{ unprocessedCount }})\n          </Button>\n          <Button \n            @click=\"exportSelected\" \n            :disabled=\"selectedTransactions.length === 0\"\n            theme=\"gray\" \n            variant=\"outline\"\n          >\n            Export Selected CSV\n          </Button>\n          <Button \n            @click=\"refreshData\" \n            :loading=\"loading\"\n            theme=\"gray\" \n            variant=\"outline\"\n          >\n            Refresh\n          </Button>\n        </div>\n      </div>\n\n      <!-- Transactions Table -->\n      <div class=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n        <div class=\"px-6 py-4 border-b border-gray-200\">\n          <h2 class=\"text-lg font-semibold text-gray-900\">Unprocessed Transactions</h2>\n          <p class=\"text-sm text-gray-600 mt-1\">{{ transactions.length }} transactions found</p>\n        </div>\n        \n        <div v-if=\"loading\" class=\"p-8 text-center\">\n          <div class=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n          <p class=\"mt-2 text-gray-600\">Loading transactions...</p>\n        </div>\n        \n        <div v-else-if=\"transactions.length === 0\" class=\"p-8 text-center\">\n          <div class=\"text-gray-400 text-6xl mb-4\">ðŸ“„</div>\n          <p class=\"text-gray-600\">No unprocessed transactions found</p>\n        </div>\n        \n        <div v-else class=\"overflow-x-auto\">\n          <table class=\"min-w-full divide-y divide-gray-200\">\n            <thead class=\"bg-gray-50\">\n              <tr>\n                <th class=\"px-6 py-3 text-left\">\n                  <input \n                    type=\"checkbox\" \n                    :checked=\"allSelected\"\n                    @change=\"toggleAll\"\n                    class=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                  />\n                </th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  PRN\n                </th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Created\n                </th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Customer\n                </th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Invoice\n                </th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Amount\n                </th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Status\n                </th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Retries\n                </th>\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Timeout\n                </th>\n              </tr>\n            </thead>\n            <tbody class=\"bg-white divide-y divide-gray-200\">\n              <tr \n                v-for=\"transaction in transactions\" \n                :key=\"transaction.name\"\n                class=\"hover:bg-gray-50\"\n              >\n                <td class=\"px-6 py-4 whitespace-nowrap\">\n                  <input \n                    type=\"checkbox\" \n                    :value=\"transaction.name\"\n                    v-model=\"selectedTransactions\"\n                    class=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                  />\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900\">\n                  {{ transaction.prn || 'N/A' }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {{ formatDate(transaction.creation) }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {{ transaction.customer || 'N/A' }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {{ transaction.sales_invoice || 'N/A' }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  â‚¹{{ formatAmount(transaction.amount) }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap\">\n                  <span class=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\"\n                        :class=\"getStatusClass(transaction.status)\">\n                    {{ transaction.status || 'N/A' }}\n                  </span>\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {{ transaction.retries || 0 }}\n                </td>\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                  {{ formatDate(transaction.timeout_at) }}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <!-- Processing Results Modal -->\n      <div v-if=\"showResults\" class=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n        <div class=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n          <div class=\"px-6 py-4 border-b border-gray-200\">\n            <h3 class=\"text-lg font-medium text-gray-900\">Processing Results</h3>\n          </div>\n          \n          <div class=\"px-6 py-4\">\n            <div class=\"mb-4\">\n              <div class=\"flex items-center justify-between\">\n                <span class=\"text-sm font-medium text-gray-700\">Total Processed:</span>\n                <span class=\"text-sm text-gray-900\">{{ processingResults.count }}</span>\n              </div>\n            </div>\n            \n            <div class=\"space-y-2 max-h-60 overflow-y-auto\">\n              <div v-for=\"result in processingResults.results\" :key=\"result.tx\" \n                   class=\"flex items-center justify-between p-2 rounded\"\n                   :class=\"getResultClass(result.status)\">\n                <span class=\"text-sm font-medium\">{{ result.tx }}</span>\n                <span class=\"text-sm\">{{ result.status }}</span>\n              </div>\n            </div>\n          </div>\n          \n          <div class=\"px-6 py-4 border-t border-gray-200 flex justify-end\">\n            <Button @click=\"showResults = false\" theme=\"gray\" variant=\"outline\">\n              Close\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n  <!-- No Internet Dialog -->\n  <div v-if=\"showOfflineDialog\" class=\"fixed inset-0 z-50 overflow-y-auto\" role=\"dialog\" aria-modal=\"true\">\n    <div class=\"flex items-center justify-center min-h-screen px-4 text-center\">\n      <div class=\"fixed inset-0 bg-gray-900 bg-opacity-75\" aria-hidden=\"true\" @click=\"showOfflineDialog = false\"></div>\n      <span class=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">&#8203;</span>\n      <div class=\"inline-block align-bottom bg-white rounded-2xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full\">\n        <div class=\"px-6 pt-6 pb-4\">\n          <div class=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4\">\n            <svg class=\"h-8 w-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01M4.93 4.93l14.14 14.14M12 19c-3.866 0-7-3.134-7-7 0-1.657.57-3.178 1.52-4.382m1.53-1.53A6.978 6.978 0 0112 5c3.866 0 7 3.134 7 7 0 1.657-.57 3.178-1.52 4.382\" />\n            </svg>\n          </div>\n          <h3 class=\"text-xl font-bold text-gray-900 mb-2\">No Internet Connection</h3>\n          <p class=\"text-sm text-gray-600\">Please check/connect to the internet first and try again.</p>\n        </div>\n        <div class=\"bg-gray-50 px-6 py-4 sm:flex sm:flex-row-reverse\">\n          <button type=\"button\" @click=\"showOfflineDialog = false\" class=\"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-6 py-3 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto\">OK</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { createResource, call as $call } from 'frappe-ui'\nimport { session } from '@/data/session'\n\n// State\nconst transactions = ref([])\nconst selectedTransactions = ref([])\nconst loading = ref(false)\nconst processing = ref(false)\nconst showResults = ref(false)\nconst processingResults = ref({ count: 0, results: [] })\nconst showOfflineDialog = ref(false)\nconst isOnline = ref(typeof navigator !== 'undefined' ? navigator.onLine : true)\n\n// Resources\nconst transactionResource = createResource({\n  url: 'frappe.client.get_list',\n  params: {\n    doctype: 'Fonepay QR Transaction',\n    fields: ['name', 'prn', 'creation', 'customer', 'sales_invoice', 'amount', 'status', 'retries', 'timeout_at'],\n    filters: { processed: 0 },\n    order_by: 'creation asc',\n    limit: 500\n  },\n  auto: false\n})\n\n// Computed\nconst allSelected = computed(() => {\n  return transactions.value.length > 0 && selectedTransactions.value.length === transactions.value.length\n})\n\nconst unprocessedCount = computed(() => {\n  return transactions.value.length\n})\n\n// Methods\nconst loadTransactions = async () => {\n  loading.value = true\n  try {\n    const res = await transactionResource.fetch()\n    transactions.value = res || []\n  } catch (error) {\n    if (isNetworkError(error)) {\n      handleOfflineError()\n    } else {\n      console.error('Error loading transactions:', error)\n      alert('Failed to load transactions: ' + error.message)\n    }\n  } finally {\n    loading.value = false\n  }\n}\n\nconst refreshData = () => {\n  loadTransactions()\n}\n\nconst toggleAll = () => {\n  if (allSelected.value) {\n    selectedTransactions.value = []\n  } else {\n    selectedTransactions.value = transactions.value.map(t => t.name)\n  }\n}\n\nconst processSelected = async () => {\n  if (selectedTransactions.value.length === 0) return\n  // If offline, do not call backend; report NO INTERNET per-tx\n  if (!isOnline.value) {\n    handleOfflineError()\n    processingResults.value = {\n      count: 0,\n      results: selectedTransactions.value.map(tx => ({ tx, status: 'NO INTERNET' }))\n    }\n    showResults.value = true\n    return\n  }\n\n  processing.value = true\n  try {\n    const res = await $call('custom_erp.custom_erp.api.fonepay.process_unprocessed_qrs', {\n      tx_names: selectedTransactions.value.join(','),\n      limit: selectedTransactions.value.length\n    })\n    \n    if (res) {\n      processingResults.value = res\n      showResults.value = true\n      selectedTransactions.value = []\n      await loadTransactions()\n    }\n  } catch (error) {\n    if (isNetworkError(error)) {\n      handleOfflineError()\n      // Explicit result summary: NO INTERNET\n      processingResults.value = {\n        count: 0,\n        results: selectedTransactions.value.length\n          ? selectedTransactions.value.map(tx => ({ tx, status: 'NO INTERNET' }))\n          : [{ tx: 'Selection', status: 'NO INTERNET' }]\n      }\n      showResults.value = true\n    } else {\n      console.error('Error processing transactions:', error)\n      alert('Failed to process transactions: ' + error.message)\n    }\n  } finally {\n    processing.value = false\n  }\n}\n\nconst processAll = async () => {\n  // If offline, do not call backend; report NO INTERNET for each visible tx\n  if (!isOnline.value) {\n    handleOfflineError()\n    processingResults.value = {\n      count: 0,\n      results: (transactions.value || []).map(t => ({ tx: t.name, status: 'NO INTERNET' }))\n    }\n    showResults.value = true\n    return\n  }\n  processing.value = true\n  try {\n    const res = await $call('custom_erp.custom_erp.api.fonepay.process_unprocessed_qrs', { limit: 500 })\n    \n    if (res) {\n      processingResults.value = res\n      showResults.value = true\n      selectedTransactions.value = []\n      await loadTransactions()\n    }\n  } catch (error) {\n    if (isNetworkError(error)) {\n      handleOfflineError()\n      // Explicit result summary: NO INTERNET for Process All\n      processingResults.value = {\n        count: 0,\n        results: [{ tx: 'ALL', status: 'NO INTERNET' }]\n      }\n      showResults.value = true\n    } else {\n      console.error('Error processing all transactions:', error)\n      alert('Failed to process all transactions: ' + error.message)\n    }\n  } finally {\n    processing.value = false\n  }\n}\n\nconst exportSelected = () => {\n  if (selectedTransactions.value.length === 0) return\n  \n  const selectedData = transactions.value.filter(t => selectedTransactions.value.includes(t.name))\n  const csvData = [\n    ['Name', 'PRN', 'Created', 'Customer', 'Invoice', 'Amount', 'Status', 'Retries', 'Timeout'],\n    ...selectedData.map(t => [\n      t.name,\n      t.prn || '',\n      t.creation || '',\n      t.customer || '',\n      t.sales_invoice || '',\n      t.amount || '',\n      t.status || '',\n      t.retries || 0,\n      t.timeout_at || ''\n    ])\n  ]\n  \n  const csv = csvData.map(row => \n    row.map(cell => `\"${(cell || '').toString().replace(/\"/g, '\"\"')}\"`).join(',')\n  ).join('\\n')\n  \n  const blob = new Blob([csv], { type: 'text/csv' })\n  const url = URL.createObjectURL(blob)\n  const a = document.createElement('a')\n  a.href = url\n  a.download = 'qrpay_transactions.csv'\n  a.click()\n  URL.revokeObjectURL(url)\n}\n\nconst getStatusClass = (status) => {\n  const classes = {\n    'CREATED': 'bg-blue-100 text-blue-800',\n    'VERIFIED': 'bg-yellow-100 text-yellow-800',\n    'SCANNED': 'bg-purple-100 text-purple-800',\n    'PENDING': 'bg-orange-100 text-orange-800',\n    'SUCCESS': 'bg-green-100 text-green-800',\n    'FAILED': 'bg-red-100 text-red-800'\n  }\n  return classes[status] || 'bg-gray-100 text-gray-800'\n}\n\nconst getResultClass = (status) => {\n  if (status === 'SUCCESS') return 'bg-green-50 text-green-800'\n  if (status === 'FAILED') return 'bg-red-50 text-red-800'\n  if (status === 'ERROR') return 'bg-red-50 text-red-800'\n  if (status === 'NO INTERNET') return 'bg-red-50 text-red-800'\n  return 'bg-gray-50 text-gray-800'\n}\n\nconst formatDate = (dateString) => {\n  if (!dateString) return 'N/A'\n  try {\n    const date = new Date(dateString)\n    return date.toLocaleDateString('en-IN', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    })\n  } catch (e) {\n    return dateString\n  }\n}\n\nconst formatAmount = (amount) => {\n  if (!amount && amount !== 0) return '0.00'\n  return Number(amount).toLocaleString('en-IN', {\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2\n  })\n}\n\nconst isNetworkError = (error) => {\n  const msg = String(error && (error.message || error)).toLowerCase()\n  if (!isOnline.value) return true\n  return msg.includes('network') || msg.includes('failed to fetch') || msg.includes('net::') || msg.includes('econn') || msg.includes('enotfound') || msg.includes('err_connection')\n}\n\nconst handleOfflineError = (message = 'No internet connection. Please check/connect to the internet and try again.') => {\n  showOfflineDialog.value = true\n}\n\n// Lifecycle\nonMounted(() => {\n  loadTransactions()\n  try {\n    window.addEventListener('online', () => { isOnline.value = true })\n    window.addEventListener('offline', () => { isOnline.value = false })\n  } catch {}\n})\n</script>\n\n<style scoped>\n/* Custom styles for QRPay Admin */\n.overflow-x-auto {\n  scrollbar-width: thin;\n  scrollbar-color: #cbd5e0 #f7fafc;\n}\n\n.overflow-x-auto::-webkit-scrollbar {\n  height: 8px;\n}\n\n.overflow-x-auto::-webkit-scrollbar-track {\n  background: #f7fafc;\n  border-radius: 4px;\n}\n\n.overflow-x-auto::-webkit-scrollbar-thumb {\n  background: #cbd5e0;\n  border-radius: 4px;\n}\n\n.overflow-x-auto::-webkit-scrollbar-thumb:hover {\n  background: #a0aec0;\n}\n\n/* Responsive table */\n@media (max-width: 768px) {\n  .overflow-x-auto {\n    font-size: 0.875rem;\n  }\n}\n</style>\n"],"names":["$call","_createElementVNode","_createVNode","_unref","_createTextVNode","_toDisplayString","_openBlock","_createElementBlock","_Fragment","_renderList"],"mappings":"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"}